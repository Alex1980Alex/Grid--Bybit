# Grid-бот для Bybit

Минимально рабочий Spot-Grid-бот для торговли на бирже Bybit с использованием REST API V5. Бот создает сетку ордеров между минимальной и максимальной ценой, и при исполнении ордера автоматически выставляет зеркальный ордер на соседнем уровне.

## Особенности

- Работа со Spot-рынком Bybit через REST API V5
- Построение равномерной сетки ордеров между заданными ценовыми уровнями
- Отслеживание исполнения ордеров через WebSocket API
- Автоматическое выставление зеркальных ордеров
- Логирование сделок в SQLite
- Безопасность: HMAC-SHA256 подпись запросов, механизм повторных попыток при ошибках
- Корректное завершение работы при остановке скрипта

## Требования

- Python 3.12 или выше
- Пакеты: requests, websockets, numpy, pandas, python-dotenv, tenacity

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/yourusername/bybit-grid-bot.git
cd bybit-grid-bot
```

2. Установите необходимые зависимости:
```bash
pip install requests websockets numpy pandas python-dotenv tenacity
```

3. Создайте файл `.env` на основе `.env_example` и укажите ваши API ключи:
```
BYBIT_API_KEY=your_api_key_here
BYBIT_API_SECRET=your_api_secret_here
```

## Использование

### Запуск через Python

Запустите бота с указанием необходимых параметров:

```bash
python runner.py --symbol BTCUSDT --low 28000 --high 32000 --grids 20 --qty 0.001
```

### Запуск через Docker

Проект также поддерживает запуск через Docker и Docker Compose:

1. Убедитесь, что у вас установлены Docker и Docker Compose
2. Создайте файл `.env` с вашими API ключами
3. Запустите бота с помощью скрипта:

```bash
chmod +x start.sh  # Только для Linux/Mac
./start.sh
```

или вручную с помощью команды:

```bash
docker-compose up -d
```

### Настройка Docker

Вы можете настроить параметры запуска бота, изменив переменные окружения в файле `.env`:

```
BYBIT_API_KEY=your_api_key_here
BYBIT_API_SECRET=your_api_secret_here
BYBIT_RECV_WINDOW=5000
SYMBOL=BTCUSDT
LOW=28000
HIGH=32000
GRIDS=20
QTY=0.001
```

### Просмотр логов

```bash
docker-compose logs -f bot
```

### Остановка бота

```bash
docker-compose down
```

### Параметры командной строки

- `--symbol`: Торговая пара (например, BTCUSDT)
- `--low`: Нижняя граница сетки
- `--high`: Верхняя граница сетки
- `--grids`: Количество уровней в сетке
- `--qty`: Количество базовой валюты для каждого ордера

## Структура проекта

```
.
├─ .env              # API-ключи (не коммитим)
├─ .env_example      # Пример файла .env
├─ config.py         # Константы бота
├─ bybit_api.py      # Обёртка над REST API V5
├─ bybit_api_async.py # Асинхронная обёртка над REST API V5
├─ ws_client.py      # WebSocket клиент для событий Bybit
├─ grid.py           # Расчёт и перестройка сетки
├─ db.py             # Работа с базой данных SQLite
├─ runner.py         # Основной класс бота и точка входа
├─ Dockerfile        # Файл сборки Docker образа для бота
├─ Dockerfile.db     # Файл сборки Docker образа для БД
├─ docker-compose.yml # Конфигурация Docker Compose
├─ start.sh          # Скрипт для запуска через Docker
├─ tests/            # Директория с тестами
└─ README.md         # Документация
```

## Безопасность

- Храните файл `.env` с API ключами в безопасном месте и не коммитьте его в репозиторий
- API ключи должны иметь минимально необходимые разрешения (только для торговли)

## Отказ от ответственности

Этот бот предоставляется "как есть", без каких-либо гарантий. Использование на реальных счетах происходит на ваш страх и риск. Автор не несет ответственности за возможные убытки от использования данного программного обеспечения.

## Лицензия

MIT 